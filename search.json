[{"path":"http://marinebon.org/obisindicators/CONTRIBUTING.html","id":null,"dir":"","previous_headings":"","what":"Contributing to obisindicators","title":"Contributing to obisindicators","text":"outlines propose change obisindicators. detailed info contributing , tidyverse packages, please see development contributing guide.","code":""},{"path":"http://marinebon.org/obisindicators/CONTRIBUTING.html","id":"fixing-typos","dir":"","previous_headings":"","what":"Fixing typos","title":"Contributing to obisindicators","text":"can fix typos, spelling mistakes, grammatical errors documentation directly using GitHub web interface, long changes made source file. generally means ’ll need edit roxygen2 comments .R, .Rd file. can find .R file generates .Rd reading comment first line.","code":""},{"path":"http://marinebon.org/obisindicators/CONTRIBUTING.html","id":"bigger-changes","dir":"","previous_headings":"","what":"Bigger changes","title":"Contributing to obisindicators","text":"want make bigger change, ’s good idea first file issue make sure someone team agrees ’s needed. ’ve found bug, please file issue illustrates bug minimal reprex (also help write unit test, needed).","code":""},{"path":"http://marinebon.org/obisindicators/CONTRIBUTING.html","id":"pull-request-process","dir":"","previous_headings":"Bigger changes","what":"Pull request process","title":"Contributing to obisindicators","text":"Fork package clone onto computer. haven’t done , recommend using usethis::create_from_github(\"marinebon/obisindicators\", fork = TRUE). Install development dependencies devtools::install_dev_deps(), make sure package passes R CMD check running devtools::check(). R CMD check doesn’t pass cleanly, ’s good idea ask help continuing. Create Git branch pull request (PR). recommend using usethis::pr_init(\"brief-description--change\"). Make changes, commit git, create PR running usethis::pr_push(), following prompts browser. title PR briefly describe change. body PR contain Fixes #issue-number. user-facing changes, add bullet top NEWS.md (.e. just first header). Follow style described https://style.tidyverse.org/news.html.","code":""},{"path":"http://marinebon.org/obisindicators/CONTRIBUTING.html","id":"code-style","dir":"","previous_headings":"Bigger changes","what":"Code style","title":"Contributing to obisindicators","text":"New code follow tidyverse style guide. can use styler package apply styles, please don’t restyle code nothing PR. use roxygen2, Markdown syntax, documentation. use testthat unit tests. Contributions test cases included easier accept.","code":""},{"path":"http://marinebon.org/obisindicators/CONTRIBUTING.html","id":"code-of-conduct","dir":"","previous_headings":"","what":"Code of Conduct","title":"Contributing to obisindicators","text":"Please note obisindicators project released Contributor Code Conduct. contributing project agree abide terms.","code":""},{"path":"http://marinebon.org/obisindicators/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2022 obisindicators authors Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"http://marinebon.org/obisindicators/articles/obisindicators.html","id":"get-biological-occurrences","dir":"Articles","previous_headings":"","what":"Get biological occurrences","title":"obisindicators","text":"","code":"occ <- occ_1M # occ_1M OR occ_SAtlantic"},{"path":"http://marinebon.org/obisindicators/articles/obisindicators.html","id":"create-a-discrete-global-grid","dir":"Articles","previous_headings":"","what":"Create a discrete global grid","title":"obisindicators","text":"Create ISEA discrete global grid resolution 9 using dggridR package: ’s overview possible resolutions: assign cell numbers occurrence data:","code":"library(dggridR) # remotes::install_github(\"r-barnes/dggridR\")  dggs <- dgconstruct(projection = \"ISEA\", topology = \"HEXAGON\", res = 9) inf <- dginfo(dggs) #>    res            cells                area_km      spacing_km          cls_km #> 1    0               12 51006562.1724088639021 7053.6524314108 8199.5003701020 #> 2    1               32 17002187.3908029571176 4072.4281300451 4678.9698717297 #> 3    2               92  5667395.7969343187287 2351.2174771369 2691.2520709129 #> 4    3              272  1889131.9323114394210 1357.4760433484 1551.8675487723 #> 5    4              812   629710.6441038132180  783.7391590456  895.6018416484 #> 6    5             2432   209903.5480346043769  452.4920144495  517.0049969031 #> 7    6             7292    69967.8493448681256  261.2463863485  298.4793231872 #> 8    7            21872    23322.6164482893764  150.8306714832  172.3244908961 #> 9    8            65612     7774.2054827631255   87.0821287828   99.4910857272 #> 10   9           196832     2591.4018275877083   50.2768904944   57.4411078487 #> 11  10           590492      863.8006091959028   29.0273762609   33.1636203580 #> 12  11          1771472      287.9335363986343   16.7589634981   19.1470215381 #> 13  12          5314412       95.9778454662114    9.6757920870   11.0545373459 #> 14  13         15943232       31.9926151554038    5.5863211660    6.3823399790 #> 15  14         47829692       10.6642050518013    3.2252640290    3.6848456792 #> 16  15        143489072        3.5547350172671    1.8621070553    2.1274466399 #> 17  16        430467212        1.1849116724224    1.0750880097    1.2282818893 #> 18  17       1291401632        0.3949705574741    0.6207023518    0.7091488792 #> 19  18       3874204892        0.1316568524914    0.3583626699    0.4094272963 #> 20  19      11622614672        0.0438856174971    0.2069007839    0.2363829597 #> 21  20      34867844012        0.0146285391657    0.1194542233    0.1364757654 #> 22  21     104603532032        0.0048761797219    0.0689669280    0.0787943199 #> 23  22     313810596092        0.0016253932406    0.0398180744    0.0454919218 #> 24  23     941431788272        0.0005417977469    0.0229889760    0.0262647733 #> 25  24    2824295364812        0.0001805992490    0.0132726915    0.0151639739 #> 26  25    8472886094432        0.0000601997497    0.0076629920    0.0087549244 #> 27  26   25418658283292        0.0000200665832    0.0044242305    0.0050546580 #> 28  27   76255974849872        0.0000066888611    0.0025543307    0.0029183081 #> 29  28  228767924549612        0.0000022296204    0.0014747435    0.0016848860 #> 30  29  686303773648832        0.0000007432068    0.0008514436    0.0009727694 #> 31  30 2058911320946492        0.0000002477356    0.0004915812    0.0005616287 occ$cell <- dgGEO_to_SEQNUM(dggs, occ$decimalLongitude, occ$decimalLatitude)[[\"seqnum\"]]"},{"path":"http://marinebon.org/obisindicators/articles/obisindicators.html","id":"calculate-metrics","dir":"Articles","previous_headings":"","what":"Calculate metrics","title":"obisindicators","text":"following function calculates number records, species richness, Simpson index, Shannon index, Hurlbert index (n = 50), Hill numbers cell. Perform calculation species level data: Add cell geometries metrics table:","code":"metrics <- calc_es50(occ) library(sf)  grid <- dgcellstogrid(dggs, metrics$cell) %>%    st_wrap_dateline() %>%    rename(cell = seqnum) %>%    left_join(     metrics,     by = \"cell\")"},{"path":"http://marinebon.org/obisindicators/articles/obisindicators.html","id":"plot-maps","dir":"Articles","previous_headings":"","what":"Plot maps","title":"obisindicators","text":"Let’s look resulting metrics map form.","code":"gmap_metric(grid, \"es\", label = \"ES(50)\") gmap_metric(grid, \"shannon\", label = \"Shannon index\") gmap_metric(grid, \"n\", label = \"# of records\", trans = \"log10\")"},{"path":"http://marinebon.org/obisindicators/articles/regional_diversity.html","id":"get-biological-occurrences-for-south-atlantic","dir":"Articles","previous_headings":"","what":"Get biological occurrences for South Atlantic","title":"Map Regional Diversity","text":"","code":"occ <- occ_SAtlantic # occ_1M OR occ_SAtlantic"},{"path":"http://marinebon.org/obisindicators/articles/regional_diversity.html","id":"create-a-discrete-global-grid","dir":"Articles","previous_headings":"","what":"Create a discrete global grid","title":"Map Regional Diversity","text":"Create ISEA discrete global grid resolution 9 using dggridR package: ’s overview possible resolutions: assign cell numbers occurrence data:","code":"library(dggridR) # remotes::install_github(\"r-barnes/dggridR\")  dggs <- dgconstruct(projection = \"ISEA\", topology = \"HEXAGON\", res = 9) inf <- dginfo(dggs) #>    res            cells                area_km      spacing_km          cls_km #> 1    0               12 51006562.1724088639021 7053.6524314108 8199.5003701020 #> 2    1               32 17002187.3908029571176 4072.4281300451 4678.9698717297 #> 3    2               92  5667395.7969343187287 2351.2174771369 2691.2520709129 #> 4    3              272  1889131.9323114394210 1357.4760433484 1551.8675487723 #> 5    4              812   629710.6441038132180  783.7391590456  895.6018416484 #> 6    5             2432   209903.5480346043769  452.4920144495  517.0049969031 #> 7    6             7292    69967.8493448681256  261.2463863485  298.4793231872 #> 8    7            21872    23322.6164482893764  150.8306714832  172.3244908961 #> 9    8            65612     7774.2054827631255   87.0821287828   99.4910857272 #> 10   9           196832     2591.4018275877083   50.2768904944   57.4411078487 #> 11  10           590492      863.8006091959028   29.0273762609   33.1636203580 #> 12  11          1771472      287.9335363986343   16.7589634981   19.1470215381 #> 13  12          5314412       95.9778454662114    9.6757920870   11.0545373459 #> 14  13         15943232       31.9926151554038    5.5863211660    6.3823399790 #> 15  14         47829692       10.6642050518013    3.2252640290    3.6848456792 #> 16  15        143489072        3.5547350172671    1.8621070553    2.1274466399 #> 17  16        430467212        1.1849116724224    1.0750880097    1.2282818893 #> 18  17       1291401632        0.3949705574741    0.6207023518    0.7091488792 #> 19  18       3874204892        0.1316568524914    0.3583626699    0.4094272963 #> 20  19      11622614672        0.0438856174971    0.2069007839    0.2363829597 #> 21  20      34867844012        0.0146285391657    0.1194542233    0.1364757654 #> 22  21     104603532032        0.0048761797219    0.0689669280    0.0787943199 #> 23  22     313810596092        0.0016253932406    0.0398180744    0.0454919218 #> 24  23     941431788272        0.0005417977469    0.0229889760    0.0262647733 #> 25  24    2824295364812        0.0001805992490    0.0132726915    0.0151639739 #> 26  25    8472886094432        0.0000601997497    0.0076629920    0.0087549244 #> 27  26   25418658283292        0.0000200665832    0.0044242305    0.0050546580 #> 28  27   76255974849872        0.0000066888611    0.0025543307    0.0029183081 #> 29  28  228767924549612        0.0000022296204    0.0014747435    0.0016848860 #> 30  29  686303773648832        0.0000007432068    0.0008514436    0.0009727694 #> 31  30 2058911320946492        0.0000002477356    0.0004915812    0.0005616287 occ$cell <- dgGEO_to_SEQNUM(dggs, occ$decimalLongitude, occ$decimalLatitude)[[\"seqnum\"]]"},{"path":"http://marinebon.org/obisindicators/articles/regional_diversity.html","id":"calculate-metrics","dir":"Articles","previous_headings":"","what":"Calculate metrics","title":"Map Regional Diversity","text":"following function calculates number records, species richness, Simpson index, Shannon index, Hurlbert index (n = 50), Hill numbers cell. Perform calculation species level data: Add cell geometries metrics table:","code":"metrics <- calc_es50(occ) library(sf)  grid <- dgcellstogrid(dggs, metrics$cell) %>%    st_wrap_dateline() %>%    rename(cell = seqnum) %>%    left_join(     metrics,     by = \"cell\")"},{"path":"http://marinebon.org/obisindicators/articles/regional_diversity.html","id":"plot-maps","dir":"Articles","previous_headings":"","what":"Plot maps","title":"Map Regional Diversity","text":"Let’s look resulting metrics map form.","code":"gmap_metric(grid, \"es\", label = \"ES(50)\") gmap_metric(grid, \"shannon\", label = \"Shannon index\") gmap_metric(grid, \"n\", label = \"# of records\", trans = \"log10\")"},{"path":"http://marinebon.org/obisindicators/articles/resolution.html","id":"get-biological-occurrences","dir":"Articles","previous_headings":"","what":"Get biological occurrences","title":"resolution","text":"","code":"occ <- occ_SAtlantic # occ_1M OR occ_SAtlantic"},{"path":"http://marinebon.org/obisindicators/articles/resolution.html","id":"create-function-to-make-grid-calculate-metrics-and-plot-maps-for-different-resolution-grid-sizes","dir":"Articles","previous_headings":"","what":"Create function to make grid, calculate metrics, and plot maps for different resolution grid sizes","title":"resolution","text":"","code":"res_changes <- function(resolution = 9){     dggs <- dgconstruct(projection = \"ISEA\", topology = \"HEXAGON\", res = resolution)     occ$cell <- dgGEO_to_SEQNUM(dggs, occ$decimalLongitude, occ$decimalLatitude)[[\"seqnum\"]]     metrics <- calc_es50(occ)    grid <- dgcellstogrid(dggs, metrics$cell) %>%      st_wrap_dateline() %>%      rename(cell = seqnum) %>%      left_join(       metrics,       by = \"cell\")    gmap_metric(grid, \"es\", label = \"ES(50)\") }"},{"path":"http://marinebon.org/obisindicators/articles/resolution.html","id":"different-resolutions","dir":"Articles","previous_headings":"","what":"Different Resolutions","title":"resolution","text":"plot res 4, hex areas ~630,000 sq km highest resolution can plot without gaps Central Atlantic Region  plot res 6, hex areas ~70,000 sq km. still see gaps can begin see band high amounts sampling towards bottom can show us sampling needed  plot res 9, hex areas ~2600 sq km, default resolution  plot res 11, hex areas ~288 sq km see large amount gaps throughout South Atlantic get small area","code":"res_changes(4) res_changes(6) res_changes(9) res_changes(11)"},{"path":"http://marinebon.org/obisindicators/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Ben Ben. Author, maintainer. Pieter Provoost. Author. Tylar Murray. Author.","code":""},{"path":"http://marinebon.org/obisindicators/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Ben B, Provoost P, Murray T (2022). obisindicators: Develop marine biodiversity indicators OBIS data. https://marinebon.org/obisindicators, https://github.com/marinebon/obisindicators.","code":"@Manual{,   title = {obisindicators: Develop marine biodiversity indicators from OBIS data},   author = {Ben Ben and Pieter Provoost and Tylar Murray},   year = {2022},   note = {https://marinebon.org/obisindicators, https://github.com/marinebon/obisindicators}, }"},{"path":"http://marinebon.org/obisindicators/index.html","id":"obisindicators","dir":"","previous_headings":"","what":"Develop marine biodiversity indicators from OBIS data","title":"Develop marine biodiversity indicators from OBIS data","text":"R package generating indicators OBIS","code":""},{"path":"http://marinebon.org/obisindicators/index.html","id":"install","dir":"","previous_headings":"","what":"Install","title":"Develop marine biodiversity indicators from OBIS data","text":"","code":"remotes::install_github(\"marinebon/obisindicators\")"},{"path":"http://marinebon.org/obisindicators/index.html","id":"use","dir":"","previous_headings":"","what":"Use","title":"Develop marine biodiversity indicators from OBIS data","text":"","code":"library(obisindicators)"},{"path":[]},{"path":"http://marinebon.org/obisindicators/index.html","id":"setup","dir":"","previous_headings":"Developer Stuff","what":"Setup","title":"Develop marine biodiversity indicators from OBIS data","text":"likely need Rtools install dggridr dependency. Rtools installed separately R Rstudio.","code":"devtools::install_local() testthat::test_local()"},{"path":"http://marinebon.org/obisindicators/index.html","id":"notes-on-creating-vignettes","dir":"","previous_headings":"Developer Stuff","what":"Notes on creating vignettes","title":"Develop marine biodiversity indicators from OBIS data","text":"create new vignettes via usethis::use_vignette(\"new_vignette_name\") set chunk’s eval false put markdown vignette display output image (html) assets go vignettes man/figures [ref)","code":""},{"path":"http://marinebon.org/obisindicators/reference/calc_es50.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate ES50 (Hurlbert index) — calc_es50","title":"Calculate ES50 (Hurlbert index) — calc_es50","text":"Calculate expected number marine species random sample 50 individuals (records)","code":""},{"path":"http://marinebon.org/obisindicators/reference/calc_es50.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate ES50 (Hurlbert index) — calc_es50","text":"","code":"calc_es50(df, esn = 50)"},{"path":"http://marinebon.org/obisindicators/reference/calc_es50.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate ES50 (Hurlbert index) — calc_es50","text":"df data frame esn expected number marine species","code":""},{"path":"http://marinebon.org/obisindicators/reference/calc_es50.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate ES50 (Hurlbert index) — calc_es50","text":"value","code":""},{"path":"http://marinebon.org/obisindicators/reference/calc_es50.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Calculate ES50 (Hurlbert index) — calc_es50","text":"expected number marine species random sample 50 individuals (records) indicator marine biodiversity richness. ES50 defined OBIS sum(esi) species following per species calculation: `n - ni >= 50 (n total number records cell ni total number records ith-species) esi = 1 - exp(lngamma(n-ni+1) + lngamma(n-50+1) - lngamma(n-ni-50+1) - lngamma(n+1)) n >= 50 esi = 1 else esi = NULL Warning: ES50 assumes individuals randomly distributed, sample size sufficiently large, samples taxonomically similar, samples taken manner.","code":""},{"path":"http://marinebon.org/obisindicators/reference/gmap_metric.html","id":null,"dir":"Reference","previous_headings":"","what":"Statically map metrics using ggplot — gmap_metric","title":"Statically map metrics using ggplot — gmap_metric","text":"Statically map metrics using ggplot","code":""},{"path":"http://marinebon.org/obisindicators/reference/gmap_metric.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Statically map metrics using ggplot — gmap_metric","text":"","code":"gmap_metric(   grid,   column = \"shannon\",   label = \"Shannon index\",   trans = \"identity\",       crs = \"+proj=robin +lon_0=0 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs\" )"},{"path":"http://marinebon.org/obisindicators/reference/gmap_metric.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Statically map metrics using ggplot — gmap_metric","text":"grid spatial features, e.g. hexagons, plot; requires geometry spatial column column column name metric; default=\"shannon\" label label show legend trans continuous scales, name transformation object object . Built-transformations include \"asn\", \"atanh\", \"boxcox\", \"date\", \"exp\", \"hms\", \"identity\" (default), \"log\", \"log10\", \"log1p\", \"log2\", \"logit\", \"modulus\", \"probability\", \"probit\", \"pseudo_log\", \"reciprocal\", \"reverse\", \"sqrt\" \"time\". See ggplot2::continuous_scale crs coordinate reference system; see sf::st_crs()","code":""},{"path":"http://marinebon.org/obisindicators/reference/gmap_metric.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Statically map metrics using ggplot — gmap_metric","text":"ggplot2 plot","code":""},{"path":"http://marinebon.org/obisindicators/reference/occ_1M.html","id":null,"dir":"Reference","previous_headings":"","what":"OBIS occurrences, global sample of 1 million records — occ_1M","title":"OBIS occurrences, global sample of 1 million records — occ_1M","text":"Simple dataset species location example purposes 2022-04-04.","code":""},{"path":"http://marinebon.org/obisindicators/reference/occ_1M.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"OBIS occurrences, global sample of 1 million records — occ_1M","text":"","code":"occ_1M"},{"path":"http://marinebon.org/obisindicators/reference/occ_1M.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"OBIS occurrences, global sample of 1 million records — occ_1M","text":"data frame 1,000,000 rows 4 variables: decimalLongitude: unique x decimalLatitude: unique y species: unique species records: number records based unique values x, y, species","code":""},{"path":"http://marinebon.org/obisindicators/reference/occ_1M.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"OBIS occurrences, global sample of 1 million records — occ_1M","text":"https://obis.org/data/access","code":""},{"path":"http://marinebon.org/obisindicators/reference/occ_SAtlantic.html","id":null,"dir":"Reference","previous_headings":"","what":"OBIS occurrences, South Atlantic full regional sample — occ_SAtlantic","title":"OBIS occurrences, South Atlantic full regional sample — occ_SAtlantic","text":"Simple dataset species location example purposes 2022-04-04.","code":""},{"path":"http://marinebon.org/obisindicators/reference/occ_SAtlantic.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"OBIS occurrences, South Atlantic full regional sample — occ_SAtlantic","text":"","code":"occ_SAtlantic"},{"path":"http://marinebon.org/obisindicators/reference/occ_SAtlantic.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"OBIS occurrences, South Atlantic full regional sample — occ_SAtlantic","text":"data frame 1,014,006 rows 4 variables: decimalLongitude: unique x decimalLatitude: unique y species: unique species records: number records based unique values x, y, species","code":""},{"path":"http://marinebon.org/obisindicators/reference/occ_SAtlantic.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"OBIS occurrences, South Atlantic full regional sample — occ_SAtlantic","text":"https://obis.org/data/access","code":""},{"path":"http://marinebon.org/obisindicators/news/index.html","id":"obisindicators-001","dir":"Changelog","previous_headings":"","what":"obisindicators 0.0.1","title":"obisindicators 0.0.1","text":"Added NEWS.md file track changes package.","code":""}]
